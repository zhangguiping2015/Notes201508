<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

</body>
<script>

    var XHR=(function (){
        var ary=['new ActiveXObject("Microsoft.XMLHTTP")','new XMLHttpRequest','new ActiveXObject("Msxml2.XMLHTTP")','new ActiveXObject("Msxml3.XMLHTTP")'];
        for( var i=0;i<ary.length;i++){
            try{
                if(eval("("+ary[i]+")")){
                    return function(){
                        return eval("("+ary[i]+")");
                    }
                }
            }catch(e){

            }

            //XHR=XHR;//这个是全局变量不用var ,XHR是自执行函数，得到结果是一个函数
        }
    })();

    console.log(XHR());
    console.log(XHR());
    //这样第二次执行XHR方法时就不需要循环，直接就能得到当前浏览器最适ajax对象。
    console.log(XHR());
</script>
</html>